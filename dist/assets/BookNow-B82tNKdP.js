import{j as e,h as b,i as E,r as p,l as T}from"./index-B_P-T95Y.js";const I="_container_73ydh_3",O="_heading_73ydh_25",D="_form_73ydh_45",z="_inputContainer_73ydh_81",A="_input_73ydh_81",F="_label_73ydh_125",L="_dateInput_73ydh_195",P="_tripName_73ydh_237",k="_amountContainer_73ydh_269",M="_amountLabel_73ydh_277",R="_amountInput_73ydh_285",W="_buttonContainer_73ydh_307",q="_button_73ydh_307",a={container:I,heading:O,form:D,inputContainer:z,input:A,label:F,dateInput:L,tripName:P,amountContainer:k,amountLabel:M,amountInput:R,buttonContainer:W,button:q};function h({type:l,id:s,placeholder:c,labelText:m,onChange:d}){return e.jsxs("div",{className:a.inputContainer,children:[e.jsx("input",{type:l,id:s,name:s,placeholder:c,className:a.input,required:!0,onChange:d}),e.jsx("label",{htmlFor:s,className:a.label,children:m})]})}function $(){const l=b(t=>t.eventName),s=b(t=>t.price),c=E(),[m,d]=p.useState(s),[x,N]=p.useState("");p.useEffect(()=>{const t=new Date;t.setDate(t.getDate()+1);const n=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");N(`${n}-${o}-${r}`)},[]);function _(t){d(t.target.value*s)}async function j(t){try{return await(await fetch("/payment.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:t})})).json()}catch(n){console.error("Error creating order:",n)}}function i(){const t=document.querySelector(".razorpay-container");if(t){let n={position:"absolute",top:"30%",left:"50%",transform:"translate(-50%, -50%)",maxHeight:"90vh",width:"100%",maxWidth:"100%",overflowY:"auto",zIndex:"9999"};const o=window.innerWidth;o>=768&&o<1024?(n.maxWidth="600px",n.top="25%"):o<768&&(n.maxWidth="100%",n.height="100vh",n.top="3%",n.left="0",n.transform="none",n.borderRadius="0"),Object.assign(t.style,n)}}const v=async t=>{try{const o=await(await fetch("/SendEmail.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}catch(n){console.error("Error sending email:",n),alert("An error occurred while sending the email.")}},g=async t=>{t.preventDefault();const n=new FormData(t.target),o=Object.fromEntries(n.entries());try{const r=await j(o.amount),w={key:r.key,amount:r.amount,currency:r.currency,name:"Griff Inn 360 Adventures",image:T,description:o.tripName,order_id:r.orderId,handler:async function(C){try{const f=await(await fetch("/verify.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).json(),S={...o,...f};f.status==="success"?(await v(S),c("/paymentsuccess")):alert("Payment verification failed.")}catch(y){console.error("Error verifying payment:",y),alert("An error occurred while verifying the payment.")}},prefill:{name:o.name,email:o.email,contact:o.mobileNumber},theme:{color:"#3399cc"}};window.scrollTo({top:0,behavior:"smooth"});const u=new window.Razorpay(w);u.open(),setTimeout(()=>i(),500),window.addEventListener("resize",i),u.on("payment.success",()=>{window.removeEventListener("resize",i)}),u.on("payment.failed",()=>{window.removeEventListener("resize",i)})}catch{alert("An error occurred. Please try again later.")}};return e.jsxs("section",{className:a.container,children:[e.jsx("p",{className:a.heading,children:"Book Now"}),e.jsx("p",{children:"3% of the total amount will be added as tax at checkout"}),e.jsxs("form",{className:a.form,onSubmit:g,method:"POST",children:[e.jsx(h,{type:"text",id:"name",placeholder:"Enter your full name",labelText:"Enter your full name:"}),e.jsx(h,{type:"number",id:"mobileNumber",placeholder:"Enter your mobile number",labelText:"Mobile Number:"}),e.jsx(h,{type:"email",id:"email",placeholder:"Enter your email id",labelText:"Enter your Email Id:"}),e.jsxs("div",{className:a.inputContainer,children:[e.jsx("input",{type:"number",id:"persons",name:"persons",inputMode:"numeric",className:a.input,placeholder:"Total No. of persons",defaultValue:1,onChange:_}),e.jsx("label",{htmlFor:"persons",className:a.label,children:"Total No. of persons:"})]}),e.jsxs("div",{className:a.inputContainer,children:[e.jsx("label",{htmlFor:"date",children:"Date of travel:"}),e.jsx("input",{type:"date",name:"date",id:"date",required:!0,min:x,className:a.dateInput})]}),e.jsxs("div",{className:a.inputContainer,children:[e.jsx("label",{htmlFor:"tripName",children:"Selected Activity Name:"}),e.jsx("input",{type:"text",name:"tripName",id:"tripName",value:l,className:a.tripName,readOnly:!0})]}),e.jsxs("div",{className:a.amountContainer,children:[e.jsx("label",{htmlFor:"amount",className:a.amountLabel,children:"Amount: Rs:"}),e.jsx("input",{type:"text",name:"amount",id:"amount",value:m,readOnly:!0,className:a.amountInput})]}),e.jsx("div",{className:a.buttonContainer,children:e.jsx("input",{type:"submit",value:"Submit",className:a.button})})]})]})}export{$ as default};
